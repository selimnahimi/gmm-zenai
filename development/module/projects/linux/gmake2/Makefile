# Alternative GNU Make workspace makefile autogenerated by Premake

ifndef config
  config=releasewithsymbols_x86
endif

ifndef verbose
  SILENT = @
endif

ifeq ($(config),releasewithsymbols_x86)
  gmcl_zenai_config = releasewithsymbols_x86
  helpers_config = releasewithsymbols_x86
  tier1_config = releasewithsymbols_x86
  LZMA_config = releasewithsymbols_x86

else ifeq ($(config),release_x86)
  gmcl_zenai_config = release_x86
  helpers_config = release_x86
  tier1_config = release_x86
  LZMA_config = release_x86

else ifeq ($(config),debug_x86)
  gmcl_zenai_config = debug_x86
  helpers_config = debug_x86
  tier1_config = debug_x86
  LZMA_config = debug_x86

else
  $(error "invalid configuration $(config)")
endif

PROJECTS := gmcl_zenai helpers tier1 LZMA

.PHONY: all clean help $(PROJECTS) SourceSDK garrysmod_common

all: $(PROJECTS)

SourceSDK: LZMA tier1

garrysmod_common: helpers

gmcl_zenai: helpers tier1 LZMA
ifneq (,$(gmcl_zenai_config))
	@echo "==== Building gmcl_zenai ($(gmcl_zenai_config)) ===="
	@${MAKE} --no-print-directory -C . -f gmcl_zenai.make config=$(gmcl_zenai_config)
endif

helpers:
ifneq (,$(helpers_config))
	@echo "==== Building helpers ($(helpers_config)) ===="
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/projects/linux/gmake2 -f Makefile config=$(helpers_config)
endif

tier1: LZMA
ifneq (,$(tier1_config))
	@echo "==== Building tier1 ($(tier1_config)) ===="
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/sourcesdk-minimal/projects/linux/gmake2 -f tier1.make config=$(tier1_config)
endif

LZMA:
ifneq (,$(LZMA_config))
	@echo "==== Building LZMA ($(LZMA_config)) ===="
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/sourcesdk-minimal/projects/linux/gmake2 -f LZMA.make config=$(LZMA_config)
endif

clean:
	@${MAKE} --no-print-directory -C . -f gmcl_zenai.make clean
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/projects/linux/gmake2 -f Makefile clean
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/sourcesdk-minimal/projects/linux/gmake2 -f tier1.make clean
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/sourcesdk-minimal/projects/linux/gmake2 -f LZMA.make clean

help:
	@echo "Usage: make [config=name] [target]"
	@echo ""
	@echo "CONFIGURATIONS:"
	@echo "  releasewithsymbols_x86"
	@echo "  release_x86"
	@echo "  debug_x86"
	@echo ""
	@echo "TARGETS:"
	@echo "   all (default)"
	@echo "   clean"
	@echo "   gmcl_zenai"
	@echo "   helpers"
	@echo "   tier1"
	@echo "   LZMA"
	@echo ""
	@echo "For more information, see https://github.com/premake/premake-core/wiki"